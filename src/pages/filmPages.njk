---
pagination:
  data: someData.films
  size: 1
  alias: film
permalink: "films/{{ film.slug.current }}/"
layout: layouts/base.njk
---
{% from 'macros/filmCreditsComp.njk' import fcc %}
{% from 'macros/heroImg.njk' import heroImg %}

{{ heroImg(film.heroImage) }}

{# <div class="headerHero" style="background-image: url('{{ film.heroImage }}'); "> #}
<div class="headerHero">
  <div class="headerTop margin0LR padding1LR">
    <div class="headerText">
      <div class="bm3">FEATURED FILM</div>
      <div class="vertGap0"></div>
      <div class="h0_5">{{film.subTitle}}</div>
      <div class="h2_0">{{film.title}}</div>
    </div>
  </div>
</div>

<div class="vSpacer2"></div>

<div class="sevenThreeGrid margin0LR padding1LRLeft ">
  <div>
    <div class="bs3" style="position: relative;">{{film.description}}</div>
  </div>
  <div style="position: relative;">
    <button onclick="window.open('{{ film.ctaButton.link }}', '_blank');" class="ctaButton">{{ film.ctaButton.name }}</button>
    <div class="vSpacer0"></div>
    {% for key, value in film.metadata %}
      {% if key != "awards" %}
        <div class="bm2">{{ value }}</div>
      {% endif %}
    {% endfor %}
  </div>
</div>

<div class="vSpacer2"></div>

<div class="awardsTicker">
  {% set areAwards = false %}
  {% for award in film.metadata.awards %}
    {% set areAwards = true %}
    <img src="{{ award.award.graphic.url }}" alt="{{ award.award.name }}">
  {% endfor %}
</div>
{% if areAwards %}
  <div class="vSpacer2"></div>
{% endif %}

<div class="margin0LR padding1LR" style="position: relative;">
  <div class="h0_5">WATCH THE TRAILER</div>
</div>

<div class="vSpacer0"></div>
{# https://www.youtube.com/embed/t_O5Y8FWXpE?si=Lmak45m0oyMXDryB #}
{# the link must be from the embed code like the above #}

<div class="responsive-iframe margin0LR">
  <iframe class="" src="{{ film.trailerLink }}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>

<div class="vSpacer2"></div>

<div class="margin0LR padding1LR">
  <div class="h0_5">
  IMAGE GALLERY
  </div>
  <div class="vSpacer0"></div>
  <div class="galleryGrid">
    {% for image in film.galleryImages %}
      <img src="{{ image.url }}" alt="{{ image.alt }}">
    {% endfor %}
  </div>

  <div class="vSpacer2"></div>

  <div class="h0_5">
    CREDITS
  </div>

  <div class="vSpacer0"></div>

  {{ fcc(film.credits, "director") }}
  {{ fcc(film.credits, "editor") }}
  {{ fcc(film.credits, "producer") }}
  {{ fcc(film.credits, "writer") }}
  {{ fcc(film.credits, "cinematographer") }}
  {{ fcc(film.credits, "productionDesigner") }}
  {{ fcc(film.credits, "sound") }}
  {{ fcc(film.credits, "cast") }}
  {{ fcc(film.credits, "associateProducer") }}
  {{ fcc(film.credits, "executiveProducer") }}
</div>

{% from 'macros/subFeaturedFilmComp.njk' import sffC %}
{% set notThisFilm = [] %}
{% set newFilmsArray = [] %}

{# here we are getting a list of all films that arent this page #}
{% for f in someData.films %}
  {% if f.title != film.title %}
    {% set notThisFilm = (notThisFilm.push(f), notThisFilm) %}
  {% endif %}
{% endfor %}

<br>

{% set uniqueValues = [] %}
{# Generate unique random values until we have three #}
{% for i in range(20) %}
  {# Limit attempts to avoid infinite loops #}
  {% set rand = range(0, notThisFilm.length) | random %}
  {# Check if the random value is already in the uniqueValues array #}
  {% set isDuplicate = false %}
  {% for value in uniqueValues %}
    {% if value == rand %}
      {% set isDuplicate = true %}
    {% endif %}
  {% endfor %}
  {% if not isDuplicate %}
    {% set uniqueValues = (uniqueValues.push(rand), uniqueValues) %}
  {% endif %}
{% endfor %}
{# If we have fewer than 3 unique values, fill with random values #}
{% for i in range(3 - uniqueValues | length) %}
  {% set rand = range(0, 5) | random %}
  {% set uniqueValues = (uniqueValues.push(rand), uniqueValues) %}
{% endfor %}

{% set threeUniqueValues = [] %}
{% for i in range(3) %}
  {% set threeUniqueValues = (threeUniqueValues.push(uniqueValues[i]), threeUniqueValues) %}
{% endfor %}

<div class="vSpacer2"></div>

<div class="margin0LR padding1LR">
  <div class="h0_5">MORE FEATURED FILMS</div>
</div>

<div class="vSpacer0"></div>

<div class="threeFeaturedFilmsComp margin0LR">
  <div class="threeColGrid">
    {% for i in threeUniqueValues %}
      {% if notThisFilm[i] %}
        {{ sffC(notThisFilm[i]) }}
      {% endif %}
    {% endfor %}
  </div>
</div>