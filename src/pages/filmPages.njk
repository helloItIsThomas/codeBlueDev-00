---
pagination:
  data: someData.films
  size: 1
  alias: film
permalink: "films/{{ film.slug.current }}/"
layout: layouts/base.njk
---
{% from 'macros/filmCreditsComp.njk' import fcc %}

<img src="{{ film.galleryImages[0].url }}" alt="{{ film.galleryImages[0].alt }}">

<div class="padLeft padRight">
  <div class="h0_5 textBoxMargin">
    FEATURED FILM
  </div>
  <div class="h2_0 textBoxMargin">
    {{film.title}}
  </div>
  <div class="b2_0 textBoxMargin sevenThreeGrid">
    {{ film.description }}
    <div>
      <button onclick="location.href='{{ film.ctaButton.link }}'" class="ctaButton">{{ film.ctaButton.name }}</button>
      <br>
      <br>
      {% for key, value in film.metadata %}
        {% if key != "awards" %}
          {{ value }}
          <br>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>

<div class="awardsTicker">
  {% for award in film.metadata.awards %}
    <img src="{{ award.award.graphic.url }}" alt="{{ award.award.name }}">
  {% endfor %}
</div>

<div class="padLeft padRight textBoxMargin">
  <div class="h0_5">WATCH THE TRAILER</div>
</div>

<div class="responsive-iframe textBoxMarginLROnly">
  <iframe class="" src="https://www.youtube.com/embed/08BVd9UwwyY?si=zSmzuUpLgjoBGkAH" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

</div>

<div class="padLeft padRight textBoxMarginLROnly">
  <div class="h0_5">
  IMAGE GALLERY
  </div>
  <div class="galleryGrid">
    {% for image in film.galleryImages %}
      <img src="{{ image.url }}" alt="{{ image.alt }}">
    {% endfor %}
  </div>

  <div class="h0_5">
    CREDITS
  </div>
  {{ fcc(film.credits, "producer") }}
  {{ fcc(film.credits, "director") }}
</div>

{% from 'macros/subFeaturedFilmComp.njk' import sffC %}
{% set notThisFilm = [] %}
{% set newFilmsArray = [] %}

{# here we are getting a list of all films that arent this page #}
{% for f in someData.films %}
  {% if f.title != film.title %}
    {% set notThisFilm = (notThisFilm.push(f), notThisFilm) %}
  {% endif %}
{% endfor %}

<br>

{% set uniqueValues = [] %}
{# Generate unique random values until we have three #}
{% for i in range(20) %}
  {# Limit attempts to avoid infinite loops #}
  {% set rand = range(0, notThisFilm.length) | random %}
  {# Check if the random value is already in the uniqueValues array #}
  {% set isDuplicate = false %}
  {% for value in uniqueValues %}
    {% if value == rand %}
      {% set isDuplicate = true %}
    {% endif %}
  {% endfor %}
  {% if not isDuplicate %}
    {% set uniqueValues = (uniqueValues.push(rand), uniqueValues) %}
  {% endif %}
{% endfor %}
{# If we have fewer than 3 unique values, fill with random values #}
{% for i in range(3 - uniqueValues | length) %}
  {% set rand = range(0, 5) | random %}
  {% set uniqueValues = (uniqueValues.push(rand), uniqueValues) %}
{% endfor %}

{% set threeUniqueValues = [] %}
{% for i in range(3) %}
  {% set threeUniqueValues = (threeUniqueValues.push(uniqueValues[i]), threeUniqueValues) %}
{% endfor %}

<div class="threeFeaturedFilmsComp">
  <div class="threeColGrid">
    {% for i in threeUniqueValues %}
      {% if notThisFilm[i] %}
        {{ sffC(notThisFilm[i]) }}
      {% endif %}
    {% endfor %}
  </div>
</div>

{# is featured: {{ film.isFeatured }} #}
{# <img src="{{ film.posterImage }}" alt="{{ film.title }}"> #}